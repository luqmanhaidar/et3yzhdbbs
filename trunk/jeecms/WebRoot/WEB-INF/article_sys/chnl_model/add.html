<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title></title>
<#include "/WEB-INF/cms_sys/head.ftl"/>
<style type="text/css">
.control{padding:10px 10px}
.line{}
#dynamicDiv{}
</style>
<script type="text/javascript">
<#assign lineNum = 4/>
var lineNum = ${lineNum};
function addLine(count) {
	count = count || 1;
	for(var i=0;i<count;i++) {
		lineNum++;
		$('#dynamicDiv div:last').after(getLine(lineNum));
	}
}
function getLine(num) {
	var s = '<div id="dy_'+num+'" class="line">'+
'名称：<input type="text" name="modelItems['+num+'].name" /> &nbsp; '+
'标题：<input type="text" name="modelItems['+num+'].label" /> &nbsp; '+
'排序：<input type="text" name="modelItems['+num+'].priority" value="'+(num+1)+'" size="3"/> &nbsp; '+
'显示：<input type="checkbox" name="modelItems['+num+'].checked" value="true" checked="checked"/> &nbsp; '+
'<input type="button" value="删除" onclick="$(\'#dy_'+num+'\').remove();"/></div>';
  return s;
}
</script>
</head>
<body>
<div class="body-box">
<div class="rhead">
	<div class="rpos">当前位置： 核心功能 - 栏目模型 - 添加</div>
	<form class="ropt" method="post">
		<input type="submit" value="返回列表" onclick="this.form.action='Com_list.do';"/>
	</form>
	<div class="clear"></div>
</div>
<@p.form action="Com_save">
<@p.text label="名称" name="bean.name" noValue="true"/>
<@p.text label="简称" name="bean.shortName" noValue="true"/>
<@p.text label="栏目模板前缀" name="bean.tplPrefixChannel"/>
<@p.text label="内容模板前缀" name="bean.tplPrefixContent"/>
<@p.radio label="是否有子栏目" name="bean.hasChild" list={"true":"是","false","否"} value="true"/>
<@p.td label="模型内容">
<div id="dynamicDiv">
<div class="control">
	<input id="addCount" type="text" value="1" size="2" onfocus="this.select();" onclick="if(event.keyCode==13){$('#addButton').click();return false;}"/>
	<input id="addButton" type="button" value="新增几行" onclick="addLine($('#addCount').val());"/>
</div>
<#list 0..lineNum as i>
<div id="dy_${i}" class="line">
名称：<input type="text" name="modelItems[${i}].name" /> &nbsp;
标题：<input type="text" name="modelItems[${i}].label" /> &nbsp;
排序：<input type="text" name="modelItems[${i}].priority" value="${i+1}" size="3"/> &nbsp;
显示：<input type="checkbox" name="modelItems[${i}].checked" value="true" checked="checked"/> &nbsp;
<input type="button" value="删除" onclick="$('#dy_${i}').remove();"/>
</div>
</#list>
</div>
</@p.td><@p.tr/>
<@p.td><@p.submit value="保存"/> &nbsp; <@p.reset value="重置"/></@p.td>
</@p.form>
</div>
</body>
</html>